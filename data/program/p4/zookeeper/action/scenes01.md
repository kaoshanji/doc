#   应用场景


##  数据发布/订阅

数据发布/订阅即所谓的配置中心，就是发布在将数据发布到ZooKeeper的一个或一系列节点上，供订阅者进行数据订阅，进而达到动态获取数据的目的，实现配置信息的集中式管理和数据的动态更新

如果将配置信息存放在ZooKeeper上进行集中管理，那么通常情况下应用会在启动的时候都会主动到ZooKeeper服务器上进行一次配置信息的获取，同时，在制定节点上注册一个Watcher监听，这样一来，但凡配置信息发生变更，服务器都会实时通知到所有订阅的客户端，从而达到实时获取最新配置信息的目的。

----

##  负载均衡

为了保证系统的高可用性，通常采用副本的方式来对数据和服务进部署

-   案例
    -   一种动态的 DNS 服务
    -   自动化 DNS服务

----

##  命名服务

在分布式系统中，被命名的实体通常可以是集群中的机器、提供的服务地址或远程对象等。

帮助应用系统通过一个资源引用的方式来实现对资源的定位与使用，在分布式环境中，上层应用仅仅需要一个全局唯一的名字。

----

##  分布式协调/通知

对于一个在多台机器上部署运行的应用而言，通常需要一个协调者来控制整个系统的运行流程，例如分布式失误的处理、机器间的互相协调等。

-   案例
    -   MySql数据复制总线：MySql_Replicator
    -   通用的分布式系统机器间通信方式

----

##  集群管理

集群管理，包括集群监控和集群控制
-   在日常开发和运维中，需要了解
    -   希望知道当前集群中究竟有多少机器在工作
    -   对集群中每台机器的运行时状态进行数据收集
    -   对集群中机器进行上下线操作
-   具有以下两大特性
    -   客户端如果对 zookeeper 的一个数据节点注册 Watcher监听，那么当该数据节点的内容或是其子节点发生变更时，zookeeper 服务器就会向订阅的客户端发送变更通知
    -   对在zookeeper上创建的临时节点，一旦客户端与服务器之间的会话失效，那么该临时节点也就被自动清除
-   案例
    -   分布式日志收集系统
    -   在线云主机管理

----

##  Master选举

分布式最核心的特性是能够将具有独立计算能力的系统单元部署在不同的机器上，构成一个完整的分布式系统，实际场景中往往需要在这些分布在不同机器上的独立系统单元中选出一个 Master。

Master 用来协调集群中其他系统单元，具有对分布式系统状态变更的决定权。

例如，在一些读写分离的应用场景中，客户端的写请求往往是由Master处理，另外一些场景中，Master则负责处理一些复杂的逻辑，并将处理结果同步给集群中其他系统单元。

----

##  分布式锁

分布式锁是控制分布式系统之间同步访问共享资源的一种方式，如果不同的系统或是同一个系统的不同主机之间共享了一个或一组资源，那么访问这些资源的时候，往往需要通过一些互斥手段来防止批次之间的干扰，一保证一致性，这样句需要使用分布式锁了。

-   案例
    -   排他锁
    -   判断读写顺序

----

##  分布式队列

基于 zookeeper 实现分布式队列

-   案例
    -   FIFO：先进先出
    -   Barrier：分布式屏障
----
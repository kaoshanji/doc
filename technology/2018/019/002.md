## 传输数据

###   连接管理：待
-   概述
    -   HTTP连接是HTTP报文传输的关键通道，理解他需要经验和实践，而不是文字
-   HTTP连接
    -   定义：HTTP连接就是TCP连接及其使用规则，HTTP通信是由TCP/IP承载的
    -   特性
        -   传输一条报文时，会以流的形式将报文数据的内容通过一条打开的TCP连接按序传输，HTTP不关注这部分细节
    -   连接类型
        -   并行连接：通过多条TCP连接发起并发的HTTP请求
        -   持久连接：重用TCP连接，以消除连接及关闭时延
        -   管道化连接：通过共享的TCP连接发起并发的HTTP请求
        -   复用的连接：交替传递请求和响应报文
-   TCP连接
    -   定义：TCP连接是因特网上的可靠连接，TCP/IP是全球网络设备通信使用的一种分组交换网络分层协议集。客户端和服务器连接一旦建立起来，两端交换的报文就不会丢失
    -   特性
        -   TCP的数据是通过名为IP分组的小数据块来发送的
        -   TCP是通过端口号来保持所有连接持续不断的运行。IP地址可以连接到正确的计算机，端口号确定应用程序。


###   代理
-   概述
    -   Web代理服务器是网络的中间实体，位于客户端和服务器端之间，扮演"中间人"的角色，在各端点之间来回传送HTTP报文。
    -   代表客户端完成事务处理的中间人
-   作用：改善安全性，提高性能，节省费用
    -   权限控制：控制客户端访问的内容
    -   安全防火墙：在网络中的单一安全节点上限制那些应用层协议的数据可以流入或流出一个组织
    -   web缓存：维护常用本地副本
    -   反向代理：假扮web服务器，接收发送给web服务器的真实请求，进而与其他服务器通信
    -   内容路由器：根据因特网流量状况以及内容类型将请求导向特定的web服务器
    -   转码器：在将内容发送给客户端之前，修改内容的主体格式
    -   匿名者：主动删除HTTP报文中身份特征
-   代理认证
    -   访问控制设备，阻止对内容的请求，直到用户向代理提供了有效的访问权限证书为止


###   缓存：以空间换时间
-   概述
    -   web缓存是可以自动保存常见文档副本的HTTP设备
    -   当web请求抵达缓存时，如果本地有"已缓存的"副本，就可以从本地存储设备而不是原始服务器中提取这个文档
-   作用
    -   减少冗余的数据传输
    -   缓解网络瓶颈的问题
    -   降低对原始服务器的要求
    -   降低距离时延
-   组成
    -   命中率
    -   拓扑结构
    -   处理步骤
        -   接收：缓存从网络中读取抵达的请求报文
        -   解析：缓存对报文进行解析，提取出URL和各种首部
        -   查询：缓存查看是否有本地副本可用
        -   新鲜度检测：缓存查看已缓存副本是否足够新鲜
        -   创建响应：缓存用新的首部和已缓存的主体来构建一条响应报文
        -   发送：缓存通过网络将响应发回给客户端
        -   日志：缓存可选的创建一个日志文件来描述这个事务
    -   保持副本的新鲜
    -   控制缓存的能力
    -   算法

###   重定向与负载均衡
-   概述
    -   很多协议都会在HTTP报文的传输过程中对其数据进行管理
    -   HTTP只关心旅程的端点(发送者和接收者)，但在包含有镜像服务器、web代理和缓存的网络世界中，HTTP报文的目的地不一定是直接可达的
-   作用
    -   有助于找到"最佳"分布式内容的技术
-   组成
    -   通用
        -   HTTP重定向：客户端请求两次
        -   DNS重定向：DNS服务器决定在URL的主机名中返回多个IP地址中的哪一个
        -   任播寻址：几台服务器使用相同的IP地址
        -   IP MAC转发：交换机或路由器等网元读取分组的目的地址，如果应该讲分组重定向，交换机会将服务器或代理的目标MAC地址赋予分组
        -   IP地址转发：第四层交换机会评估分组的目的端口并将重定向分组的IP地址改成代理或镜像服务器的IP地址
    -   代理与缓存
        -   显式浏览器配置：配置web浏览器，使其将HTTP报文发送给附近的一个代理，通常是缓存
        -   代理自动配置：web浏览器从配置服务器中解析出PAC文件，这个PAC文件会告诉浏览器为每个URL使用什么代理
        -   web proxy代理自动发现协议：web浏览器向配置服务器查询一个PAC文件的URL
        -   web缓存协调协议：路由器评估一个分组的目的地址，并用代理或镜像服务器的IP地址将重定向分组封装起来
        -   因特网缓存协议：代理缓存会在一组兄弟代理缓存中查询所请求的内容
        -   缓存分组路由器协议：一种代理缓存散列协议
        -   超文本缓存协议：参与的代理缓存可以向一组兄弟缓存查询所请求的内容

###   集成点：网关、隧道和中继
-   概述
    -   web是一种强大的内容发布工具
    -   web上的所有资源都可以使用HTTP协议，而且其他应用程序和应用程序协议也可以利用HTTP来完成他们的任务
-   网关
    -   定义
        -   作为某种翻译器使用，抽象出一种能够到达资源的方法
        -   资源和应用程序之间的粘合剂
        -   应用程序可以(通过HTTP或其他已定义的接口)请求网关来处理某条请求，网关可以提供一条响应
    -   类型
        -   协议网关
            -   服务器端web网关(HTTP/*)：请求流入原始服务器时，服务器端web网关会将客户端HTTP请求转换为其他协议
            -   服务器端安全网关(HTTP/HTTPS)：一个组织可以通过网关对所有的输入web请求加密，以提供额外的隐私和安全性保护
            -   客户端安全加速器网关(HTTPS/HTTP)：位于web服务器之前，作为不可见的拦截网关或反向代理使用
        -   资源网关：web服务器与应用程序的通信
            -   通用网关接口(CGI
            -   服务器扩展API
-   隧道
    -   定义
        -   通过HTTP应用程序访问使用非HTTP协议的应用程序


#### OAuth2 简介
> 一种授权标准协议

#### 1.资料
  - [官网](https://oauth.net/)
  - [博客](http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html)
  - [中文](http://colobu.com/2017/04/28/oauth2-rfc6749/?utm_source=tuicool&utm_medium=referral)

#### 2.场景
  - 用户使用A应用，A需要B支持，A、B之间需要认证授权，A才能访问B资源
  - 例如：在京东买东西，使用qq登录，这样本来是在"京东"上面，但是有个跳转到qq界面确认过程，然后再回来继续，但是已经登录了京东了，其实，只是登录了qq，没有登录京东，但是，京东借助qq认识你了

#### 3.作用
  - A、B之间认证授权的过程标准化
  - A不需要用户密码，就能够访问B指定的资源，登录B就行
  - 处于A和B之间，A、B不能直接访问，只能通过中间层即授权层

#### 4.专业介绍
> 在OAuth中，客户端在请求受资源所有者控制并托管在资源服务器上的资源的访问权限时，将被颁发一组不同于资源所有者所拥有凭据的凭据。

> 客户端获得一个访问令牌（一个代表特定作用域、生命期以及其他访问属性的字符串），用以代替使用资源所有者的凭据来访问受保护资源。

> 访问令牌由授权服务器在资源所有者认可的情况下颁发给第三方客户端。客户端使用访问令牌访问托管在资源服务器的受保护资源。

  - 这里的客户端即A，例如京东，资源所有者即B，例如qq，相互之间的通行证是"访问令牌"
  - 资源服务器、授权服务器，可以分开也可以在一块

#### 5.角色
  - OAuth定义了四种角色：
    - 资源所有者
      - 能够许可受保护资源访问权限的实体。当资源所有者是个人时，它作为最终用户被提及
    - 资源服务器
      - 托管受保护资源的服务器，能够接收和响应使用访问令牌对受保护资源的请求
    - 客户端
      - 使用资源所有者的授权代表资源所有者发起对受保护资源的请求的应用程序。术语“客户端”并非特指任何特定的的实现特点（例如：应用程序是否在服务器、台式机或其他设备上执行）
    - 授权服务器
      - 在成功验证资源所有者且获得授权后颁发访问令牌给客户端的服务器

#### 6.图解
  - 协议流程
  <table>
    <tr>
      <td rowspan="8">Client</td>
      <td>--(A)- Authorization Request -</td>
      <td rowspan="3">Resource Owner</td>
    </tr>
    <tr>
      <td>-(B)-- Authorization Grant ----</td>
    </tr>
    <tr>
      <td></td>
    </tr>
    <tr>
      <td>--(C)-- Authorization Grant --</td>
      <td rowspan="3">Authorization Server</td>
    </tr>
    <tr>
      <td>-(D)----- Access Token -------</td>
    </tr>
    <tr>
      <td></td>
    </tr>
    <tr>
      <td>--(E)----- Access Token ------</td>
      <td rowspan="2">Resource Server</td>
    </tr>
    <tr>
      <td>-(F)--- Protected Resource ---</td>
    </tr>
  </table>
  - 图1：抽象的协议流程  
    - （A）客户端向从资源所有者请求授权。授权请求可以直接向资源所有者发起（如图所示），或者更可取的是通过作为中介的授权服务器间接发起。
    - （B）客户端收到授权许可，这是一个代表资源所有者的授权的凭据，使用本规范中定义的四种许可类型之一或 者使用扩展许可类型表示。授权许可类型取决于客户端请求授权所使用的方式以及授权服务器支持的类型。
    - （C）客户端与授权服务器进行身份认证并出示授权许可请求访问令牌。  
    - （D）授权服务器验证客户端身份并验证授权许可，若有效则颁发访问令牌。  
    - （E）客户端从资源服务器请求受保护资源并出示访问令牌进行身份验证。 
    - （F）资源服务器验证访问令牌，若有效则满足该请求。
